!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.doggodb=e():t.doggodb=e()}(self,(function(){return t={551:(t,e,a)=>{const i=a(921);t.exports=function(){let t=i(),e=t?{}:window.localStorage;return{getItem:function(a=""){if(t){let t=`${a}.json`;return e.readFileSync(t,{encoding:"utf8"})}return e.getItem(a)},setItem:function(a="",i=""){if(t){let t=`${itemToGet}.json`;return e.writeFileSync(t,i,{encoding:"utf8"}),!0}return e.setItem(a,i)}}}},10:(t,e,a)=>{let i=a(551)(),n=JSON.parse,s=JSON.stringify,r="No Table Name provided.",o="No reference to table created.",l={entryId:!0},c={$not:"not",$in:"in",$notIn:"not-in",$includes:"includes",$notIncludes:"not-includes"},h={$or:"or"};class b{constructor(t){if(!t)throw new Error("No table name provided.");this.contents=[],this.tableName=t,this.createdAt=new Date,this.updatedAt=new Date}}function d(t,e){let a=!0;for(let i in e)if(i in h&&"object"==typeof e[i]){if(!f(t,e[i])){a=!1;break}}else if(i in c&&"object"==typeof e[i]){if(!u(t,Object.keys(e[i])[0],c[i],Object.values(e[i])[0])){a=!1;break}}else if(i.includes(".")){let n=v(t,i);if(!T(e[i],n)){a=!1;break}}else if(!(i in t)||!T(e[i],t[i])){a=!1;break}return a}function u(t,e,a,i){if(!t||"object"!=typeof t)throw new Error("Invalid row type.");if(!t[e])return!1;let n=t[e];switch(e.includes(".")&&(n=v(t[e])),a){case"in":if(!i||!Array.isArray(i))throw new Error("value to check field value 'in' is not an iterable.");return i.includes(n);case"not-in":if(!i||!Array.isArray(i))throw new Error("value to check field value 'not-in' is not an iterable.");return!i.includes(n);case"not":return n!=i;case"includes":return n.includes(i);case"not-includes":return!n.includes(i);default:throw new Error("Invalid/Unsupported operation.")}}function f(t,e){let a=!1;for(let i in e)if(i in t){let n=t[i];if(i.includes(".")&&(n=v(t,i)),T(e[i],n)){a=!0;break}}return a}function v(t,e){let a=e.split("."),i={...t};for(var n=0;n<a.length;n++){if(!i[a[n]])return null;i=i[a[n]]}return i}function T(t,e){return t instanceof RegExp?t.test(e):t==e}t.exports={db:class{constructor(t,e={onChange:null}){if(!t)throw new Error("No Databse Name provided.");this.databaseName=t,this.restoreToPreviousState(),this.onChange=null,e&&"object"==typeof e&&(this.onChange=e.onChange||null)}restoreToPreviousState(){let t=(e=this.databaseName,i.getItem(e));var e;let a={tables:{},createdAt:new Date,updatedAt:new Date};t&&(a=n(t)),a||function(t){if(i.getItem(t))throw new Error("Database with that name already exists.");i.setItem(t,s({tables:{},createdAt:new Date,updatedAt:new Date}))}(this.databaseName),this.database=a,this.activeTable=null,this.isTransacting=!1}save(){var t,e;this.isTransacting||(t=this.databaseName,e=this.database,i.setItem(t,s(e)),this.database.updatedAt=new Date,this.onChange&&"function"==typeof this.onChange&&this.onChange(this.database))}table(t){if(!t)throw new Error(r);return this.database.tables[t]?this.activeTable=this.database.tables[t]:this.create(t),this}list(){return this.database.tables}create(t){if(!t)throw new Error(r);if(t in this.database.tables)throw new Error("Table with that name already exists.");return this.activeTable=new b(t),this.database.tables[t]=this.activeTable,this.save(),this}drop(t){if(t)this.activeTable&&t===this.activeTable.tableName&&(this.activeTable=null),t in this.database.tables&&delete this.database.tables[t];else{let t=null;this.activeTable&&(t=this.activeTable.tableName,this.activeTable=null),t in this.database.tables&&delete this.database.tables[t]}return this.save(),this}get(){if(this.activeTable)return this.activeTable.contents;throw new Error(o)}add(t){if(!t)throw new Error("No Data provided.");if(!this.activeTable)throw new Error(o);if("object"!=typeof t||!Object.keys(t).length)throw new Error("Not a valid object for storage.");return this.activeTable.contents.push({...t,entryId:parseInt((new Date).getTime()+10*Math.random()+10*Math.random())}),this.activeTable.updatedAt=new Date,this.database.tables[this.activeTable.tableName]=this.activeTable,this.save(),this}find(t,e={offset:0,limit:null}){try{let{limit:a,offset:i}=e;if(a||(a=1/0),i||(i=0),this.activeTable&&this.activeTable.contents&&this.activeTable.contents.length&&t&&Object.keys(t).length){let e=[],n=0;for(let s of this.activeTable.contents)n>=i&&e.length<=a&&d(s,t)&&e.push(s),n++;return e}return this.activeTable&&this.activeTable.contents?i||a!==1/0?[...this.activeTable.contents].slice(i,i+a):this.activeTable.contents:[]}catch(t){throw new Error(t.message)}}findAndUpdate(t,e,a=!0){if(this.activeTable&&this.activeTable.contents&&this.activeTable.contents.length&&e){if(e&&Object.keys(e).length>0)for(let t in e)t in l&&delete e[t];let i=!1;for(let n=0;n<this.activeTable.contents.length;n++){let s=!0,r=this.activeTable.contents[n];if(t&&Object.keys(t).length>0&&(s=d(r,t)),s&&(i=!0,r={...r,...e},this.activeTable.contents[n]=r),a)break}if(this.database.tables[this.activeTable.tableName]=this.activeTable,this.save(),i)return!0}return!1}updateAt(t,e){if(!this.activeTable)throw new Error(o);if(this.activeTable&&this.activeTable.contents&&this.activeTable.contents.length&&t>=0&&this.activeTable.contents.length>t&&e){if(e&&Object.keys(e).length>0)for(let t in e)t in l&&delete e[t];return this.activeTable.contents[t]={...this.activeTable.contents[t],...e},this.activeTable.updatedAt=new Date,this.database.tables[this.activeTable.tableName]=this.activeTable,this.save(),!0}return!1}delete(t,e=!0){if(this.activeTable&&this.activeTable.contents&&this.activeTable.contents.length&&t){let a=!1;for(let i=0;i<this.activeTable.contents.length&&(d(this.activeTable.contents[i],t)&&(a=!0,this.activeTable.contents.splice(i,1)),!e);i++);if(this.database.tables[this.activeTable.tableName]=this.activeTable,this.save(),a)return!0}return!1}startTransaction(){this.isTransacting=!0}commitTransaction(){this.isTransacting=!1,this.save()}abortTransaction(){this.isTransacting=!1,this.restoreToPreviousState()}}}},921:t=>{t.exports=function(){try{return!window&&!!t.exports}catch(t){return!0}}}},e={},function a(i){var n=e[i];if(void 0!==n)return n.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,a),s.exports}(10);var t,e}));