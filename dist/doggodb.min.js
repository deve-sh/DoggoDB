!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.doggodb=t():e.doggodb=t()}(self,(function(){return e={551:(e,t,a)=>{const i=a(921);e.exports=function(){let e=i(),t=e?{}:window.localStorage;return{getItem:function(a=""){if(e){let e=`${a}.json`;return t.readFileSync(e,{encoding:"utf8"})}return t.getItem(a)},setItem:function(a="",i=""){if(e){let e=`${itemToGet}.json`;return t.writeFileSync(e,i,{encoding:"utf8"}),!0}return t.setItem(a,i)}}}},10:(e,t,a)=>{let i=a(551)(),n=JSON.parse,s=JSON.stringify,r="No Table Name provided.",l="No reference to table created.",o={entryId:!0},c={$not:"not",$in:"in",$notIn:"not-in",$includes:"includes",$notIncludes:"not-includes"},h={$or:"or"};class b{constructor(e){if(!e)throw new Error("No table name provided.");this.contents=[],this.tableName=e,this.createdAt=new Date,this.updatedAt=new Date}}function d(e,t,a,i){if(!e||"object"!=typeof e)throw new Error("Invalid row type.");if(!e[t])return!1;let n=e[t];switch(t.includes(".")&&(n=u(e[t])),a){case"in":if(!i||!Array.isArray(i))throw new Error("value to check field value 'in' is not an iterable.");return i.includes(n);case"not-in":if(!i||!Array.isArray(i))throw new Error("value to check field value 'not-in' is not an iterable.");return!i.includes(n);case"not":return n!=i;case"includes":return n.includes(i);case"not-includes":return!n.includes(i);default:throw new Error("Invalid/Unsupported operation.")}}function f(e,t){let a=!1;for(let i in t)if(i in e){let n=e[i];if(i.includes(".")&&(n=u(e,i)),n==t[i]){a=!0;break}}return a}function u(e,t){let a=t.split("."),i={...e};for(var n=0;n<a.length;n++){if(!i[a[n]])return null;i=i[a[n]]}return i}function v(e,t){return e instanceof RegExp?e.test(t):e==t}e.exports={db:class{constructor(e,t={onChange:null}){if(!e)throw new Error("No Databse Name provided.");this.databaseName=e,this.restoreToPreviousState(),this.onChange=null,t&&"object"==typeof t&&(this.onChange=t.onChange||null)}restoreToPreviousState(){let e=(t=this.databaseName,i.getItem(t));var t;let a={tables:{},createdAt:new Date,updatedAt:new Date};e&&(a=n(e)),a||function(e){if(i.getItem(e))throw new Error("Database with that name already exists.");i.setItem(e,s({tables:{},createdAt:new Date,updatedAt:new Date}))}(this.databaseName),this.database=a,this.activeTable=null,this.isTransacting=!1}save(){var e,t;this.isTransacting||(e=this.databaseName,t=this.database,i.setItem(e,s(t)),this.database.updatedAt=new Date,this.onChange&&"function"==typeof this.onChange&&this.onChange(this.database))}table(e){if(!e)throw new Error(r);return this.database.tables[e]?this.activeTable=this.database.tables[e]:this.create(e),this}list(){return this.database.tables}create(e){if(!e)throw new Error(r);if(e in this.database.tables)throw new Error("Table with that name already exists.");return this.activeTable=new b(e),this.database.tables[e]=this.activeTable,this.save(),this}drop(e){if(e)this.activeTable&&e===this.activeTable.tableName&&(this.activeTable=null),e in this.database.tables&&delete this.database.tables[e];else{let e=null;this.activeTable&&(e=this.activeTable.tableName,this.activeTable=null),e in this.database.tables&&delete this.database.tables[e]}return this.save(),this}get(){if(this.activeTable)return this.activeTable.contents;throw new Error(l)}add(e){if(!e)throw new Error("No Data provided.");if(!this.activeTable)throw new Error(l);if("object"!=typeof e||!Object.keys(e).length)throw new Error("Not a valid object for storage.");return this.activeTable.contents.push({...e,entryId:parseInt((new Date).getTime()+10*Math.random()+10*Math.random())}),this.activeTable.updatedAt=new Date,this.database.tables[this.activeTable.tableName]=this.activeTable,this.save(),this}find(e,t={offset:0,limit:null}){try{let{limit:a,offset:i}=t;if(a||(a=1/0),i||(i=0),this.activeTable&&this.activeTable.contents&&this.activeTable.contents.length&&e&&Object.keys(e).length){let t=[],n=0;for(let s of this.activeTable.contents){if(n>=i&&t.length<=a){let a=!0;for(let t in e)if(t in h&&"object"==typeof e[t])f(s,e[t])||(a=!1);else if(t in c&&"object"==typeof e[t])d(s,Object.keys(e[t])[0],c[t],Object.values(e[t])[0])||(a=!1);else if(t.includes(".")){let i=u(s,t);v(e[t],i)||(a=!1)}else t in s&&v(e[t],s[t])||(a=!1);a&&t.push(s)}n++}return t}return this.activeTable&&this.activeTable.contents?i||a!==1/0?[...this.activeTable.contents].slice(i,i+a):this.activeTable.contents:[]}catch(e){throw new Error(e.message)}}findAndUpdate(e,t,a=!0){if(this.activeTable&&this.activeTable.contents&&this.activeTable.contents.length&&t){if(t&&Object.keys(t).length>0)for(let e in t)e in o&&delete t[e];let i=!1;for(let n=0;n<this.activeTable.contents.length;n++){let s=!0,r=this.activeTable.contents[n];if(e&&Object.keys(e).length>0)for(let t in e)if(t in h&&"object"==typeof e[t])f(r,e[t])||(s=!1);else if(t in c&&"object"==typeof e[t])d(r,Object.keys(e[t])[0],c[t],Object.values(e[t])[0])||(s=!1);else if(t.includes(".")){let a=u(r,t);v(e[t],a)||(s=!1)}else t in r&&v(e[t],r[t])||(s=!1);if(s&&(i=!0,r={...r,...t},this.activeTable.contents[n]=r),a)break}if(this.database.tables[this.activeTable.tableName]=this.activeTable,this.save(),i)return!0}return!1}updateAt(e,t){if(!this.activeTable)throw new Error(l);if(this.activeTable&&this.activeTable.contents&&this.activeTable.contents.length&&e>=0&&this.activeTable.contents.length>e&&t){if(t&&Object.keys(t).length>0)for(let e in t)e in o&&delete t[e];return this.activeTable.contents[e]={...this.activeTable.contents[e],...t},this.activeTable.updatedAt=new Date,this.database.tables[this.activeTable.tableName]=this.activeTable,this.save(),!0}return!1}delete(e,t=!0){if(this.activeTable&&this.activeTable.contents&&this.activeTable.contents.length&&e){let a=!1;for(let i=0;i<this.activeTable.contents.length;i++){let n=!0,s=this.activeTable.contents[i];for(let t in e)if(t in h&&"object"==typeof e[t])f(s,e[t])||(n=!1);else if(t in c&&"object"==typeof e[t])d(s,Object.keys(e[t])[0],c[t],Object.values(e[t])[0])||(n=!1);else if(t.includes(".")){let a=u(s,t);v(e[t],a)||(n=!1)}else t in s&&v(e[t],s[t])||(n=!1);if(n&&(a=!0,this.activeTable.contents.splice(i,1)),t)break}if(this.database.tables[this.activeTable.tableName]=this.activeTable,this.save(),a)return!0}return!1}startTransaction(){this.isTransacting=!0}commitTransaction(){this.isTransacting=!1,this.save()}abortTransaction(){this.isTransacting=!1,this.restoreToPreviousState()}}}},921:e=>{e.exports=function(){try{return!window&&!!e.exports}catch(e){return!0}}}},t={},function a(i){var n=t[i];if(void 0!==n)return n.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,a),s.exports}(10);var e,t}));